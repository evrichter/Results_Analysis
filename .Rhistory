# Probes
correct_probes <- data.table(Item=seq(61,72), Correct=c(1, 7, 7, 1, 1, 7, 1, 1, 7, 1, 7, 7))
probes <- merge(probes, correct_probes, on=Item)
probes$Accurate <- probes$Rating == probes$Correct
probes$AccSum <- probes$Rating == probes$Correct
aggregate(Accurate ~ ID, probes, mean) # accurate proportion per ID
aggregate(Accurate ~ ID, probes, sum) # number / 12 correct per ID
# Checks for completeness / balancing / lists
table(dt$ID, dt$Item)        # Did every subject see each item once and only once
table(dt$ID, dt$Condition)   # Did each condition get presented to each subject the same amount of times (i.e. 10)
table(dt$Item, dt$Condition) # How often was each condition of each item presented
table(dt$list)               # How many trials were collected per list
# Condition averages
aggregate(Rating ~ Condition, dt, FUN=mean)
dt_items <- dt[, lapply(.SD, mean), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")]
#dt_items[,c("Rating_SD", "ReactionTime_SD")] <- dt[, lapply(.SD, sd), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")][,c(3,4)]
dt_items[,c("Rating_SE", "ReactionTime_SE")] <- dt[, lapply(.SD, se), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")][,c(3,4)]
cond <- dt_items[, lapply(.SD, mean), by=list(Condition), .SDcols=c("Rating", "ReactionTime")]
condse <- dt_items[, lapply(.SD, sd), by=list(Condition), .SDcols=c("Rating", "ReactionTime")]
cond <- merge(cond, condse, by="Condition", suffixes=c("", "_SE"))
cond
# ratings per item & condition sorted
stim <- dt_items[,lapply(.SD, mean), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")]
dt[,lapply(.SD, mean), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")]
condabc <- stim[Condition %in% c("A", "B", "C"),]
condd <- stim[Condition %in% c("Ad", "Bd", "Cd"),]
dt_items[order(dt_items),]
stim[order(stim$Item),]
condabc[order(condabc$Item),]
condd[order(condd$Item),]
items <- data.frame(condabc[order(data.frame(condabc)[,1], data.frame(condabc)[,2])])
items[,c("Ratingdist", "ReactionTimedist")] <- data.frame(condd[order(data.frame(condd)[,1], data.frame(condd)[,2])])[,c("Rating", "ReactionTime")]
fwrite(data.table(items), "plausresults.csv")
# Plaus Data Viz
library(ggplot2)
# (after doing the switcheroo on the conditions / target words)
# dt <- fread("GradedP6_results.csv")
dt <- fread("plausresults.csv")
means <- aggregate(Rating ~ Condition, dt, FUN=mean)
means$Plaus_SE <- aggregate(Rating ~ Condition, dt, FUN=se)$Rating
dt_items_abc <- dt[, lapply(.SD, mean), by=list(Item, Condition), .SDcols=c("Rating")]
# density plot
p <- ggplot(dt_items_abc, aes(x=Rating, color=Condition, fill=Condition)) + geom_density(alpha=0.4) + theme_minimal() + xlim(1,7) + ylim(0, 1.5)
# Condition averages
aggregate(Rating ~ Condition, dt, FUN=mean)
dt_items <- dt[, lapply(.SD, mean), by=list(Item, Condition), .SDcols=c("Rating", "ReactionTime")]
### SPR PARSING AND DATA VIZ
## CHRISTOPH AURNHAMMER, 2021
## Adapted from comp_ibex.r
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPRPlausRating", "avg_plausrating_per_item")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plausstudy_t_avg", "Plausstudy_d_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
fwrite(df, "GP6SPR.csv")
#############################################################################################################################################
#fwrite(df, "lmerSPR/data/GP6SPR.csv")
# Verb length per cond
# df$ncharverb <- nchar(df$Verb)
# aggregate(ncharverb ~ Condition, df, mean)
# ########## READ PROCESSED DATA
# setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
# df_bal <- fread("Exp4_SPR.csv")
# df_bal$Subject <- as.factor(df_bal$Subject)
# # data exclusion per region
# cutoff_in_sd = 4
# # df_first <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "First",], sd_cutoff=cutoff_in_sd)
# # df_second <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Second",], sd_cutoff=cutoff_in_sd)
# # df_third <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Third",], sd_cutoff=cutoff_in_sd)
# # df_fourth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Fourth",], sd_cutoff=cutoff_in_sd)
# # df_fifth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Fifth",], sd_cutoff=cutoff_in_sd)
# # df_sixth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Sixth",], sd_cutoff=cutoff_in_sd)
# # df_precrit_2 <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Pre-critical_2",], sd_cutoff=cutoff_in_sd)
# # df_precrit <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Pre-critical",], sd_cutoff=cutoff_in_sd)
# # df_crit <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Critical",], sd_cutoff=cutoff_in_sd)
# # df_spill <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Spillover",], sd_cutoff=cutoff_in_sd)
# # df_postspill <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Post-spillover",], sd_cutoff=cutoff_in_sd)
# #### DATA VISUALISATION
# ## Per Condition RTs per region
# #df_bal_excl <- rbind(df_first, df_second, df_third, df_fourth, df_fifth, df_sixth)
# #df_bal_excl <- rbind(df_precrit_2, df_precrit, df_crit, df_spill, df_postspill)
# df_bal_excl <- rbind(df_precrit, df_crit, df_spill, df_postspill)
# # PLOT WORDSTEPS
# df_bal_excl$ReadingTime <- log(df_bal_excl$ReadingTime)
# plusminus <- aggregate(ReadingTime ~ Region + Condition, df_bal_excl, FUN=mean)
# #plusminus$Region <- factor(plusminus$Region, levels=c("First", "Second", "Third", "Fourth", "Fifth", "Sixth"))
# plusminus$Region <- factor(plusminus$Region, levels=c("Pre-critical", "Critical", "Spillover", "Post-spillover"))
# plusminus$SE <- aggregate(ReadingTime ~ Region + Condition, df_bal_excl, FUN=se)$ReadingTime
# p <- ggplot(plusminus, aes(x=Region, y=ReadingTime, color=Condition, group=Condition)) + geom_point(size=2.2) + geom_line(size=0.5)
# p <- p + theme_minimal() + geom_errorbar(aes(ymin=ReadingTime-SE, ymax=ReadingTime+SE), width=.1, size=0.3)
# p <- p + scale_color_manual(name="Condition", labels=c("A: Expected Plausible", "B: Unexpected Less Plausible", "C: Unexpected Implausible"), values=c("#000000", "#BB5566", "#004488", "#DDAA33"))
# p <- p + theme(legend.position="bottom", legend.text=element_text(size=7), legend.title=element_text(size=7))
# p <- p + labs(x="Region", y="Reading Time")
# p
# ggsave("/Users/chr/Desktop/35Subjects_SPR.pdf", p, width=4, height=4)
# ## Reaction Time
# # Histogram Reaction Time
# df_react <- df_crit[!is.na(df_crit$ReactionTime),]
# p <- ggplot(df_react, aes(ReactionTime)) + geom_histogram() + theme_minimal()
# p <- p + geom_vline(xintercept=mean(df_react$ReactionTime)) + geom_vline(xintercept=median(df_react$ReactionTime))
# p
# p <- ggplot(df_react, aes(log(ReactionTime))) + geom_histogram() + theme_minimal()
# p
# # Barplot Reaction Time
# reac_agg <- df_react[, lapply(.SD, mean, na.rm=TRUE), by=Condition, .SDcols=c("ReactionTime")]
# reac_agg$SE <- df_react[, lapply(.SD, se, na.rm=TRUE), by=Condition, .SDcols=c("ReactionTime")]$ReactionTime
# p <- ggplot(reac_agg, aes(x=Condition, y=ReactionTime)) + geom_bar(stat="identity") + geom_errorbar(aes(ymin=ReactionTime-SE, ymax=ReactionTime+SE), width=.2)
# p <- p + theme_minimal() + labs(x="Condition", y="Reaction Time", title="CAP SPR Reaction Times", subtitle="A: Expected Plausible B: Unexpected Less Plausible C: Unexpected Implausible")
# #p <- p + ylim(0, 3500)
# p
# ## Accuracy
# # Barplot Accuracy
# acc_agg <- df_react[, lapply(.SD, mean, na.rm=TRUE), by=Condition, .SDcols=c("Accuracy")]
# acc_agg$SE <- df_react[, lapply(.SD, se, na.rm=TRUE), by=Condition, .SDcols=c("Accuracy")]$Accuracy
# p <- ggplot(acc_agg, aes(x=Condition, y=Accuracy)) + geom_bar(stat="identity") + geom_errorbar(aes(ymin=Accuracy-SE, ymax=Accuracy+SE), width=.2)
# p <- p + theme_minimal() + labs(x="Condition", y="Accuracy", title="CAP SPR Accuracies", subtitle="A: Expected Plausible B: Unexpected Less Plausible C: Unexpected Implausible")
# p <- p + ylim(0, 1)
# p
debugSource("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/ibex_fns.r")
### SPR PARSING AND DATA VIZ
## CHRISTOPH AURNHAMMER, 2021
## Adapted from comp_ibex.r
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPRPlausRating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plausstudy_t_avg", "Plausstudy_d_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
fwrite(df, "GP6SPR.csv")
#############################################################################################################################################
#fwrite(df, "lmerSPR/data/GP6SPR.csv")
# Verb length per cond
# df$ncharverb <- nchar(df$Verb)
# aggregate(ncharverb ~ Condition, df, mean)
# ########## READ PROCESSED DATA
# setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
# df_bal <- fread("Exp4_SPR.csv")
# df_bal$Subject <- as.factor(df_bal$Subject)
# # data exclusion per region
# cutoff_in_sd = 4
# # df_first <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "First",], sd_cutoff=cutoff_in_sd)
# # df_second <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Second",], sd_cutoff=cutoff_in_sd)
# # df_third <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Third",], sd_cutoff=cutoff_in_sd)
# # df_fourth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Fourth",], sd_cutoff=cutoff_in_sd)
# # df_fifth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Fifth",], sd_cutoff=cutoff_in_sd)
# # df_sixth <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Sixth",], sd_cutoff=cutoff_in_sd)
# # df_precrit_2 <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Pre-critical_2",], sd_cutoff=cutoff_in_sd)
# # df_precrit <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Pre-critical",], sd_cutoff=cutoff_in_sd)
# # df_crit <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Critical",], sd_cutoff=cutoff_in_sd)
# # df_spill <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Spillover",], sd_cutoff=cutoff_in_sd)
# # df_postspill <- exclude(df_bal[ReadingTime > 100 & ReadingTime < 2500 & Region == "Post-spillover",], sd_cutoff=cutoff_in_sd)
# #### DATA VISUALISATION
# ## Per Condition RTs per region
# #df_bal_excl <- rbind(df_first, df_second, df_third, df_fourth, df_fifth, df_sixth)
# #df_bal_excl <- rbind(df_precrit_2, df_precrit, df_crit, df_spill, df_postspill)
# df_bal_excl <- rbind(df_precrit, df_crit, df_spill, df_postspill)
# # PLOT WORDSTEPS
# df_bal_excl$ReadingTime <- log(df_bal_excl$ReadingTime)
# plusminus <- aggregate(ReadingTime ~ Region + Condition, df_bal_excl, FUN=mean)
# #plusminus$Region <- factor(plusminus$Region, levels=c("First", "Second", "Third", "Fourth", "Fifth", "Sixth"))
# plusminus$Region <- factor(plusminus$Region, levels=c("Pre-critical", "Critical", "Spillover", "Post-spillover"))
# plusminus$SE <- aggregate(ReadingTime ~ Region + Condition, df_bal_excl, FUN=se)$ReadingTime
# p <- ggplot(plusminus, aes(x=Region, y=ReadingTime, color=Condition, group=Condition)) + geom_point(size=2.2) + geom_line(size=0.5)
# p <- p + theme_minimal() + geom_errorbar(aes(ymin=ReadingTime-SE, ymax=ReadingTime+SE), width=.1, size=0.3)
# p <- p + scale_color_manual(name="Condition", labels=c("A: Expected Plausible", "B: Unexpected Less Plausible", "C: Unexpected Implausible"), values=c("#000000", "#BB5566", "#004488", "#DDAA33"))
# p <- p + theme(legend.position="bottom", legend.text=element_text(size=7), legend.title=element_text(size=7))
# p <- p + labs(x="Region", y="Reading Time")
# p
# ggsave("/Users/chr/Desktop/35Subjects_SPR.pdf", p, width=4, height=4)
# ## Reaction Time
# # Histogram Reaction Time
# df_react <- df_crit[!is.na(df_crit$ReactionTime),]
# p <- ggplot(df_react, aes(ReactionTime)) + geom_histogram() + theme_minimal()
# p <- p + geom_vline(xintercept=mean(df_react$ReactionTime)) + geom_vline(xintercept=median(df_react$ReactionTime))
# p
# p <- ggplot(df_react, aes(log(ReactionTime))) + geom_histogram() + theme_minimal()
# p
# # Barplot Reaction Time
# reac_agg <- df_react[, lapply(.SD, mean, na.rm=TRUE), by=Condition, .SDcols=c("ReactionTime")]
# reac_agg$SE <- df_react[, lapply(.SD, se, na.rm=TRUE), by=Condition, .SDcols=c("ReactionTime")]$ReactionTime
# p <- ggplot(reac_agg, aes(x=Condition, y=ReactionTime)) + geom_bar(stat="identity") + geom_errorbar(aes(ymin=ReactionTime-SE, ymax=ReactionTime+SE), width=.2)
# p <- p + theme_minimal() + labs(x="Condition", y="Reaction Time", title="CAP SPR Reaction Times", subtitle="A: Expected Plausible B: Unexpected Less Plausible C: Unexpected Implausible")
# #p <- p + ylim(0, 3500)
# p
# ## Accuracy
# # Barplot Accuracy
# acc_agg <- df_react[, lapply(.SD, mean, na.rm=TRUE), by=Condition, .SDcols=c("Accuracy")]
# acc_agg$SE <- df_react[, lapply(.SD, se, na.rm=TRUE), by=Condition, .SDcols=c("Accuracy")]$Accuracy
# p <- ggplot(acc_agg, aes(x=Condition, y=Accuracy)) + geom_bar(stat="identity") + geom_errorbar(aes(ymin=Accuracy-SE, ymax=Accuracy+SE), width=.2)
# p <- p + theme_minimal() + labs(x="Condition", y="Accuracy", title="CAP SPR Accuracies", subtitle="A: Expected Plausible B: Unexpected Less Plausible C: Unexpected Implausible")
# p <- p + ylim(0, 1)
# p
### SPR PARSING AND DATA VIZ
## CHRISTOPH AURNHAMMER, 2021
## Adapted from comp_ibex.r
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPRPlausRating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plaus_target_avg", "Plaus_dist_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
debugSource("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/ibex_fns.r")
debugSource("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/ibex_fns.r")
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPR_Plaus_Rating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plaus_target_avg", "Plaus_dist_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
View(pretests)
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPR_Plaus_Rating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plaus_target_avg", "Plaus_dist_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
fwrite(df, "GP6SPR.csv")
#fwrite(df, "lmerSPR/data/GP6SPR.csv")
#fwrite(df, "lmerSPR/data/GP6SPR.csv")
# Verb length per cond
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
precritRTT <- df$precritRT
precritRT <- cbind(df[, 1:14], precritRTT, df[, 15:ncol(my_data)])
position_precritRT <- which(names(df == "precritRT"))
precritRTT <- df$precritRT
precritRT <- cbind(df[, 1:14], precritRTT, df[, 15:ncol(my_data)])
position_precritRT <- which(names(df == "precritRTT"))
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
#
precritRTT <- df$precritRT
#
df %>% relocate(precritRT, .after= QuestionCondition)
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
library(dplyr)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
library(dplyr)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPR_Plaus_Rating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAC/0lEQVR4Xu1W7WtSURz2e/VvXGGEg17oQ9D3PhX0pbKBygrmioLhPhgb9LaMbc2hkpFuufVuuVjMLTXUfCsWvSxqoVPcbLotBzUcE2ydzuNwuLN79br6FD3ww+u95zzPPb/7+z3nSCT/QSFVWXdIlcZDnNLYQeMhpzS5aTg5pcGGe3iGMey8mlGnNm2nhI27mi0Btdkbve6czPYHUyt3Xs+v9oXSP3tcieU2+8esvMcTrW+yBDB2y8J4652nzP7WgVD8yduFguN9ltwf/0b6I/PkZiBDTP40MSJ8adLrTZOrY8mCvNebqGs0+zGX5asIqcokP6AZjNwNp3LPJhbJvfEFYqYi3S9mie55ilweTZFLozPF3w76X+dKkWuur8X/rfYvub1nbRFwsLy84FSGg/tbbOHHbzL5px8WiSU0R7o8a2QXnTOCgRdA4Fo7FMvvOdMXBhfLvwGyhs5tSKMtkFyCGFKHFZWIEL7o901ifNHy4NMS0os6YHXWwSlMJzW3Q3Gk0RqeK6aKJQLEih7T++LgZHWKQHXtbrYEHbRA8M26PbMbVlYuKFa0fThZkDXdCvJWLqcwHFabfVFU442XGcFvVg4xokc6XVFws3q0WIxXupyfs8XV0WpkJ/IJihE9bXuXhTmwehI4CG3qPPoMhcJOFBIEKolqHbE8uFk9CewKDoLKFEqnkCAgJHphZHoV3KweVjhipXYFB+ErlmqC/tiPTWOrCJoG9e7EMuyq1hUKiSGEU0qLps0+kYU3wq7YiUKClcQQwkVDS1eu90RhxHwNzydYTQwh2BZoznrapLqx6QKMWOg71iJWsfEB2NDxXl+8tBuwBCVBMWKIitYGwGhhuJpHkzl2cinEimGbqmreADbPfecGXp0fmsqzJGJDS+eCQ/RGzCmMDdhE8ZYsWbVY34CVhhMsb0Xg7ZCSo3pvon04UWCJ2cAYjN3SEaMEVBcORjJ6QEJ5o6doI69Q9/iFwDXu4RnG/NEhqhxFYdpLzDHRvXZN79Fnf0Xon8Bv7Dl6k2kbLucAAAAASUVORK5CYII=
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
### PACKAGES
library(ggplot2)
library(data.table)
library(gridExtra)
library(dplyr)
setwd("~/Downloads/Master_Thesis/3_SPR_Study/Results_Analysis/")
source("ibex_fns.r")
#### DATA FORMATTING
# Get DEMOG CONSENT SURVEY data
cn <- get_consent("consent.txt")
dm <- get_demog("demog.txt")
sv <- get_survey("survey.txt")
survey <- merge(dm, sv, by=c("IPhash"), all=TRUE)
survey$Age <- as.numeric(survey$Age)
round(mean(survey$Age),2)
round(sd(survey$Age),2)
range(survey$Age)
table(survey$gender)
nrow(survey[!(Native_language %in% c("Deutsch", "deutsch")),])
table(survey$Task_difficulty)/length(survey$Task_difficulty)
table(survey$Experiment_length)/length(survey$Experiment_length)
table(survey$handedness)
# Get REACTION TIMES & READING TIMES
rc <- get_reacts("task.txt")
pr <- get_plausibility_rating("task.txt")
rd <- get_reads("reading.txt")
df <- merge(rd, rc[,c("ReactionTime", "Accuracy", "IPhash", "Item")], by=c("IPhash", "Item"), all=TRUE)
df <- merge(df, pr[,c("IPhash", "Item", "Condition", "SPR_Plaus_Rating", "SPR_Plaus_avg")], by=c("IPhash", "Item", "Condition"), all=TRUE)
# Change IPhashes to subject numbers
colnames(df)[1] <- "Subject"
df[, Subject := .GRP, by = .(Subject)]
df$Subject <- as.character(df$Subject)
# Check accuracies / reaction times
agg_df <- df[, lapply(.SD, mean, na.rm = TRUE), by=Subject, .SDcols=c("ReactionTime", "Accuracy", "ReadingTime")]
agg_df$Subject <- as.factor(agg_df$Subject)
agg_df[order(agg_df$ReactionTime),]
agg_df[order(agg_df$Accuracy),]
# merge with assoc and cloze pretest values
pretests <- fread("GradedP6_FollowUpStudy_Pretests.csv")
df <- merge(df, pretests[,c("Item", "Condition", "Verb", "Target", "Distractor", "Last_Mentioned", "Cloze", "Cloze_distractor", "Cloze_C_alternative", "Plaus_target_avg", "Plaus_dist_avg", "Surprisal_target", "Surprisal_distractor")], by=c("Item", "Condition"))
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
#
df %>% relocate(precritRT, .after= QuestionCondition)
fwrite(df, "GP6SPR.csv")
#
df %>% relocate(df$precritRT, .after= df$QuestionCondition)
# add precritRT as predictor
df$precritRT <- rep(df[Region=="Pre-critical",]$ReadingTime, each=5)
#
df %>% relocate(precritRT, .before= ReadingTime)
fwrite(df, "GP6SPR.csv")
#
df <- df %>% relocate(precritRT, .before= ReadingTime)
fwrite(df, "GP6SPR.csv")
